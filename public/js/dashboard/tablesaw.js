/*! Tablesaw - v2.0.3 - 2016-05-02
* https://github.com/filamentgroup/tablesaw
* Copyright (c) 2016 Filament Group; Licensed MIT 
* MIT License
*/

"undefined"==typeof Tablesaw&&(Tablesaw={i18n:{modes:["Stack","Swipe","Toggle"],columns:'Col<span class="a11y-sm">umn</span>s',columnBtnText:"Columns",columnsDialogError:"No eligible columns.",sort:"Sort"},mustard:"querySelector"in document&&(!window.blackberry||window.WebKitPoint)&&!window.operamini}),Tablesaw.config||(Tablesaw.config={}),Tablesaw.mustard&&jQuery(document.documentElement).addClass("tablesaw-enhanced"),function(t){var e="tablesaw-bar",a="tablesawcreate",s="tablesawdestroy",n="tablesawrefresh",i=function(e){if(!e)throw new Error("Tablesaw requires an element.");this.table=e,this.$table=t(e),this.mode=this.$table.attr("data-tablesaw-mode")||"stack",this.init()};i.prototype.init=function(){this.$table.attr("id")||this.$table.attr("id","table-"+Math.round(1e4*Math.random())),this.createToolbar();var t=this._initCells();this.$table.trigger(a,[this,t])},i.prototype._initCells=function(){var e,a=this.table.querySelectorAll("thead tr"),s=this;return t(a).each(function(){var n=0;t(this).children().each(function(){var t=parseInt(this.getAttribute("colspan"),10),i=":nth-child("+(n+1)+")";if(e=n+1,t)for(var l=0;l<t-1;l++)i+=", :nth-child("+(++n+1)+")";this.cells=s.$table.find("tr").not(a[0]).not(this).children().filter(i),n++})}),e},i.prototype.refresh=function(){this._initCells(),this.$table.trigger(n)},i.prototype.createToolbar=function(){var a=this.$table.prev().filter("."+e);a.length||(a=t("<div>").addClass(e).insertBefore(this.$table)),this.$toolbar=a,this.mode&&this.$toolbar.addClass("mode-"+this.mode)},i.prototype.destroy=function(){this.$table.prev().filter("."+e).each(function(){this.className=this.className.replace(/\bmode\-\w*\b/gi,"")});var a=this.$table.attr("id");t(document).unbind("."+a),t(window).unbind("."+a),this.$table.trigger(s,[this]),this.$table.removeData("table")},t.fn.table=function(){return this.each(function(){var e=t(this);if(!e.data("table")){var a=new i(this);e.data("table",a)}})},t(document).on("enhance.tablesaw",function(e){Tablesaw.mustard&&t(e.target).find("table[data-tablesaw-mode],table[data-tablesaw-sortable]").table()})}(jQuery),function(t,e,a){var s="tablesaw-stack",n="tablesaw-cell-label",i="tablesaw-cell-content",l="tablesaw-stack",o="data-tablesaw-no-labels",r="data-tablesaw-hide-empty",c=function(t){this.$table=e(t),this.labelless=this.$table.is("["+o+"]"),this.hideempty=this.$table.is("["+r+"]"),this.labelless||(this.allHeaders=this.$table.find("th")),this.$table.data(l,this)};c.prototype.init=function(t){if(this.$table.addClass(s),!this.labelless){var a=e(this.allHeaders),l=this.hideempty;a.each(function(){var a=e(this),s=e(this.cells).filter(function(){return!(e(this).parent().is("["+o+"]")||l&&e(this).is(":empty"))}),r=s.not(this).filter("thead th").length&&" tablesaw-cell-label-top",c=a.find(".tablesaw-sortable-btn"),d=c.length?c.html():a.html();if(""!==d)if(r){var h=parseInt(e(this).attr("colspan"),10),b="";h&&(b="td:nth-child("+h+"n + "+t+")"),s.filter(b).prepend("<b class='"+n+r+"'>"+d+"</b>")}else s.wrapInner("<span class='"+i+"'></span>"),s.prepend("<b class='"+n+"'>"+d+"</b>")})}},c.prototype.destroy=function(){this.$table.removeClass(s),this.$table.find("."+n).remove(),this.$table.find("."+i).each(function(){e(this).replaceWith(this.childNodes)})},e(document).on("tablesawcreate",function(t,e,a){"stack"===e.mode&&new c(e.table).init(a)}),e(document).on("tablesawdestroy",function(t,a){"stack"===a.mode&&e(a.table).data(l).destroy()})}(0,jQuery),function(t){var e={_create:function(){return t(this).each(function(){t(this).trigger("beforecreate.tablesawbtn").tablesawbtn("_init").trigger("create.tablesawbtn")})},_init:function(){var e=t(this),a=this.getElementsByTagName("select")[0];return a&&t(this).addClass("btn-select").tablesawbtn("_select",a),e},_select:function(e){var a=function(e,a){var s,n,i,l=t(a).find("option");if(l.each(function(){this.selected&&(s=document.createTextNode(this.text))}),i=e.childNodes,l.length>0)for(var o=0,r=i.length;o<r;o++)(n=i[o])&&3===n.nodeType&&e.replaceChild(s,n)};a(this,e),t(this).bind("change refresh",function(){a(this,e)})}};t.fn.tablesawbtn=function(e,a,s,n){return this.each(function(){return e&&"string"==typeof e?t.fn.tablesawbtn.prototype[e].call(this,a,s,n):t(this).data("tablesawbtnactive")?t(this):(t(this).data("tablesawbtnactive",!0),void t.fn.tablesawbtn.prototype._create.call(this))})},t.extend(t.fn.tablesawbtn.prototype,e)}(jQuery),function(t,e,a){var s=function(t){this.$table=e(t),this.classes={columnToggleTable:"tablesaw-columntoggle",columnBtnContain:"tablesaw-columntoggle-btnwrap tablesaw-advance",columnBtn:"tablesaw-columntoggle-btn tablesaw-nav-btn down",popup:"tablesaw-columntoggle-popup",priorityPrefix:"tablesaw-priority-",toolbar:"tablesaw-bar"},this.headers=this.$table.find("tr:first > th"),this.$table.data("tablesaw-coltoggle",this)};s.prototype.init=function(){var t,a,s,n,i,l,o=this;this.$table.addClass(this.classes.columnToggleTable),a=(t=this.$table.attr("id"))+"-popup",l=e("<div class='"+this.classes.columnBtnContain+"'></div>"),s=e("<a href='#"+a+"' class='btn btn-micro "+this.classes.columnBtn+"' data-popup-link><span>"+Tablesaw.i18n.columnBtnText+"</span></a>"),n=e("<div class='dialog-table-coltoggle "+this.classes.popup+"' id='"+a+"'></div>"),i=e("<div class='btn-group'></div>");var r,c=!1;function d(a){a&&e(a.target).closest("."+o.classes.popup).length||(e(document).unbind("click."+t),s.removeClass("up").addClass("down"),l.removeClass("visible"))}e(this.headers).not("td").each(function(){var t=e(this),a=t.attr("data-tablesaw-priority"),s=o.$getCells(this);a&&"persist"!==a&&(s.addClass(o.classes.priorityPrefix+a),e("<label><input type='checkbox' checked>"+t.text()+"</label>").appendTo(i).children(0).data("tablesaw-header",this),c=!0)}),c||i.append("<label>"+Tablesaw.i18n.columnsDialogError+"</label>"),i.appendTo(n),i.find('input[type="checkbox"]').on("change",function(t){var e=t.target.checked;o.$getCellsFromCheckbox(t.target).toggleClass("tablesaw-cell-hidden",!e).toggleClass("tablesaw-cell-visible",e),o.$table.trigger("tablesawcolumns")}),s.appendTo(l),l.appendTo(this.$table.prev().filter("."+this.classes.toolbar)),s.on("click.tablesaw",function(a){a.preventDefault(),l.is(".visible")?d():(l.addClass("visible"),s.removeClass("down").addClass("up"),e(document).unbind("click."+t,d),window.clearTimeout(r),r=window.setTimeout(function(){e(document).one("click."+t,d)},15))}),n.appendTo(l),this.$menu=i,e(window).on("resize."+t,function(){o.refreshToggle()}),this.refreshToggle()},s.prototype.$getCells=function(t){return e(t).add(t.cells)},s.prototype.$getCellsFromCheckbox=function(t){var a=e(t).data("tablesaw-header");return this.$getCells(a)},s.prototype.refreshToggle=function(){var t=this;this.$menu.find("input").each(function(){this.checked="table-cell"===t.$getCellsFromCheckbox(this).eq(0).css("display")})},s.prototype.refreshPriority=function(){var t=this;e(this.headers).not("td").each(function(){var a=e(this),s=a.attr("data-tablesaw-priority"),n=a.add(this.cells);s&&"persist"!==s&&n.addClass(t.classes.priorityPrefix+s)})},s.prototype.destroy=function(){this.$table.removeClass(this.classes.columnToggleTable),this.$table.find("th, td").each(function(){e(this).removeClass("tablesaw-cell-hidden").removeClass("tablesaw-cell-visible"),this.className=this.className.replace(/\bui\-table\-priority\-\d\b/g,"")})},e(document).on("tablesawcreate",function(t,e){"columntoggle"===e.mode&&new s(e.table).init()}),e(document).on("tablesawdestroy",function(t,a){"columntoggle"===a.mode&&e(a.table).data("tablesaw-coltoggle").destroy()})}(0,jQuery),function(t,e,a){e.extend(Tablesaw.config,{swipe:{horizontalThreshold:15,verticalThreshold:30}});var s={toolbar:"tablesaw-bar",hideBtn:"disabled",persistWidths:"tablesaw-fix-persist",allColumnsVisible:"tablesaw-all-cols-visible"};function n(a){var n,i,l=e("<div class='tablesaw-advance'></div>"),o=e("<a href='#' class='tablesaw-nav-btn btn btn-micro left' title='Previous Column'></a>").appendTo(l),r=e("<a href='#' class='tablesaw-nav-btn btn btn-micro right' title='Next Column'></a>").appendTo(l),c=a.find("thead th"),d=c.not('[data-tablesaw-priority="persist"]'),h=[],b=e(document.head||"head"),u=a.attr("id"),f=(n=document.createElement("div"),i=n.getElementsByTagName("i"),n.innerHTML="\x3c!--[if lte IE 8]><i></i><![endif]--\x3e",!i.length);if(!c.length)throw new Error("tablesaw swipe: no header cells found. Are you using <th> inside of <thead>?");function p(t){return e(t.cells).add(t)}function w(t){p(t).removeClass("tablesaw-cell-hidden")}function m(t){p(t).addClass("tablesaw-cell-hidden")}function v(){var t,n="#"+u+".tablesaw-swipe ",i=[],l=a.width(),o=[];c.each(function(t){var a;e(this).is('[data-tablesaw-priority="persist"]')&&(a=e(this).outerWidth())<.75*l&&(o.push(t+"-"+a),i.push(n+" .tablesaw-cell-persist:nth-child("+(t+1)+") { width: "+a+"px; }"))}),t=o.join("_"),a.addClass(s.persistWidths);var r=e("#"+u+"-persist");r.length&&r.data("hash")===t||(r.remove(),i.length&&e("<style>"+i.join("\n")+"</style>").attr("id",u+"-persist").data("hash",t).appendTo(b))}function g(){var t,a=[];return d.each(function(s){var n=e(this),i="none"===n.css("display")||n.is(".tablesaw-cell-hidden");if(i||t){if(i&&t)return a[1]=s,!1}else t=!0,a[0]=s}),a}function y(){var t=g();return[t[1]-1,t[0]-1]}function C(t){return t[1]>-1&&t[1]<d.length}function T(){if(!(n=a.attr("data-tablesaw-swipe-media"))||"matchMedia"in t&&t.matchMedia(n).matches){var n,i=a.parent().width(),l=[],o=0,r=[],d=c.length;c.each(function(t){var a=e(this).is('[data-tablesaw-priority="persist"]');l.push(a),o+=h[t]+(a?0:20),r.push(o),(a||o>i)&&d--});var b=0===d;c.each(function(t){l[t]?p(this).addClass("tablesaw-cell-persist"):r[t]<=i||b?(b=!1,w(this)):m(this)}),f&&(a.removeClass(s.persistWidths),e("#"+u+"-persist").remove()),a.trigger("tablesawcolumns")}}function $(t){var e=function(t){return t?g():y()}(t);C(e)&&(isNaN(e[0])&&(e[0]=t?0:d.length-1),f&&v(),m(d.get(e[0])),w(d.get(e[1])),a.trigger("tablesawcolumns"))}function x(t,e){return(t.touches||t.originalEvent.touches)[0][e]}a.css("width","auto"),c.each(function(){h.push(e(this).outerWidth())}),a.css("width",""),l.appendTo(a.prev().filter(".tablesaw-bar")),a.addClass("tablesaw-swipe"),u||(u="tableswipe-"+Math.round(1e4*Math.random()),a.attr("id",u)),o.add(r).click(function(t){$(!!e(t.target).closest(r).length),t.preventDefault()}),a.bind("touchstart.swipetoggle",function(a){var s,n,i=x(a,"pageX"),l=x(a,"pageY");e(t).off("resize",T),e(this).bind("touchmove",function(t){s=x(t,"pageX"),n=x(t,"pageY");var e=Tablesaw.config.swipe;Math.abs(s-i)>e.horizontalThreshold&&Math.abs(n-l)<e.verticalThreshold&&t.preventDefault()}).bind("touchend.swipetoggle",function(){var a=Tablesaw.config.swipe;Math.abs(n-l)<a.verticalThreshold&&(s-i<-1*a.horizontalThreshold&&$(!0),s-i>a.horizontalThreshold&&$(!1)),window.setTimeout(function(){e(t).on("resize",T)},300),e(this).unbind("touchmove touchend")})}).bind("tablesawcolumns.swipetoggle",function(){var t=C(y()),e=C(g());o[t?"removeClass":"addClass"](s.hideBtn),r[e?"removeClass":"addClass"](s.hideBtn),o.closest("."+s.toolbar)[t||e?"removeClass":"addClass"](s.allColumnsVisible)}).bind("tablesawnext.swipetoggle",function(){$(!0)}).bind("tablesawprev.swipetoggle",function(){$(!1)}).bind("tablesawdestroy.swipetoggle",function(){var a=e(this);a.removeClass("tablesaw-swipe"),a.prev().filter(".tablesaw-bar").find(".tablesaw-advance").remove(),e(t).off("resize",T),a.unbind(".swipetoggle")}),T(),e(t).on("resize",T)}e(document).on("tablesawcreate",function(t,e){"swipe"===e.mode&&n(e.$table)})}(this,jQuery),function(t){function e(e){return t.map(e.childNodes,function(e){var a=t(e);return a.is("input, select")?a.val():a.hasClass("tablesaw-cell-label")?void 0:t.trim(a.text())}).join("")}var a="tablesaw-sortable",s="data-tablesaw-sortable-default-col",n={head:a+"-head",ascend:a+"-ascending",descend:a+"-descending",switcher:a+"-switch",tableToolbar:"tablesaw-toolbar",sortButton:a+"-btn"},i={_create:function(e){return t(this).each(function(){if(t(this).data("init"+a))return!1;t(this).data("init"+a,!0).trigger("beforecreate."+a)[a]("_init",e).trigger("create."+a)})},_init:function(){var i,l,o,r=t(this),c=function(e){t.each(e,function(e,a){var i=t(a);i.removeAttr(s),i.removeClass(n.ascend),i.removeClass(n.descend)})};r.addClass(a),i=r.find("thead th[data-"+a+"-col]"),o=i,t.each(o,function(e,a){t(a).addClass(n.head)}),function(e,a){t.each(e,function(e,s){var i=t("<button class='"+n.sortButton+"'/>");i.bind("click",{col:s},a),t(s).wrapInner(i)})}(i,function(e){if(!t(e.target).is("a[href]")){e.stopPropagation();var s=t(this).parent(),o=e.data.col,d=i.index(s);c(s.siblings()),s.hasClass(n.descend)?(r[a]("sortBy",o,!0),d+="_asc"):(r[a]("sortBy",o),d+="_desc"),l&&l.find("select").val(d).trigger("refresh"),e.preventDefault()}}),function(e){t.each(e,function(e,a){var i=t(a);i.is("["+s+"]")&&(i.hasClass(n.descend)||i.addClass(n.ascend))})}(i),r.is("[data-tablesaw-sortable-switch]")&&function(i){l=t("<div>").addClass(n.switcher).addClass(n.tableToolbar).html(function(){var a=["<label>"+Tablesaw.i18n.sort+":"];return a.push('<span class="btn btn-small">&#160;<select>'),i.each(function(i){var l=t(this),o=l.is("["+s+"]"),r=l.hasClass(n.descend),c=l.is("[data-sortable-numeric]"),d=0;t(this.cells).slice(0,5).each(function(){isNaN(parseInt(e(this),10))||d++});var h=5===d;c||l.attr("data-sortable-numeric",h?"":"false"),a.push("<option"+(o&&!r?" selected":"")+' value="'+i+'_asc">'+l.text()+" "+(h?"&#x2191;":"(A-Z)")+"</option>"),a.push("<option"+(o&&r?" selected":"")+' value="'+i+'_desc">'+l.text()+" "+(h?"&#x2193;":"(Z-A)")+"</option>")}),a.push("</select></span></label>"),a.join("")});var o=r.prev().filter(".tablesaw-bar"),d=o.children().eq(0);d.length?l.insertBefore(d):l.appendTo(o),l.find(".btn").tablesawbtn(),l.find("select").on("change",function(){var e=t(this).val().split("_"),s=i.eq(e[0]);c(s.siblings()),r[a]("sortBy",s.get(0),"asc"===e[1])})}(i,r.find("tbody tr:nth-child(-n+3)"))},getColumnNumber:function(e){return t(e).prevAll().length},getTableRows:function(){return t(this).find("tbody tr")},sortRows:function(a,s,n,i){var l,o;l=function(a){var n=[];return t.each(a,function(a,i){var l=t(i).children().get(s);n.push({element:l,cell:e(l),rowNum:a})}),n}(a);var r=t(i).data("tablesaw-sort");return o=!(!r||"function"!=typeof r)&&r(n)||function(t,e){var a=/[^\-\+\d\.]/g;return t?function(t,s){return e?parseFloat(t.cell.replace(a,""))-parseFloat(s.cell.replace(a,"")):t.cell.toLowerCase()>s.cell.toLowerCase()?1:-1}:function(t,s){return e?parseFloat(s.cell.replace(a,""))-parseFloat(t.cell.replace(a,"")):t.cell.toLowerCase()<s.cell.toLowerCase()?1:-1}}(n,t(i).is("[data-sortable-numeric]")&&!t(i).is('[data-sortable-numeric="false"]')),a=function(t,e){var a,s,n,i=[];for(a=0,s=t.length;a<s;a++)n=t[a].rowNum,i.push(e[n]);return i}(l.sort(o),a)},replaceTableRows:function(e){t(this).find("tbody").html(e)},makeColDefault:function(e,a){var i=t(e);i.attr(s,"true"),a?(i.removeClass(n.descend),i.addClass(n.ascend)):(i.removeClass(n.ascend),i.addClass(n.descend))},sortBy:function(e,s){var n,i,l=t(this);n=l[a]("getColumnNumber",e),i=l[a]("getTableRows"),i=l[a]("sortRows",i,n,s,e),l[a]("replaceTableRows",i),l[a]("makeColDefault",e,s)}};t.fn[a]=function(e){var s,n=Array.prototype.slice.call(arguments,1);return e&&"string"==typeof e?void 0!==(s=t.fn[a].prototype[e].apply(this[0],n))?s:t(this):(t(this).data(a+"data")||(t(this).data(a+"active",!0),t.fn[a].prototype._create.call(this,e)),t(this))},t.extend(t.fn[a].prototype,i),t(document).on("tablesawcreate",function(t,e){e.$table.is("table[data-tablesaw-sortable]")&&e.$table[a]()})}(jQuery),function(t,e,a){var s={attr:{init:"data-tablesaw-minimap"}};function n(a){var n=e('<div class="tablesaw-advance minimap">'),i=e('<ul class="tablesaw-advance-dots">').appendTo(n),l="tablesaw-advance-dots-hide";function o(){if(function(e){var a=e.attr(s.attr.init);return!a||t.matchMedia&&t.matchMedia(a).matches}(a)){n.show();var o=i.find("li").removeClass(l);a.find("thead th").each(function(t){"none"===e(this).css("display")&&o.eq(t).addClass(l)})}else n.hide()}a.find("thead th").each(function(){i.append("<li><i></i></li>")}),n.appendTo(a.prev().filter(".tablesaw-bar")),o(),e(t).on("resize",o),a.bind("tablesawcolumns.minimap",function(){o()}).bind("tablesawdestroy.minimap",function(){var a=e(this);a.prev().filter(".tablesaw-bar").find(".tablesaw-advance").remove(),e(t).off("resize",o),a.unbind(".minimap")})}e(document).on("tablesawcreate",function(t,e){"swipe"!==e.mode&&"columntoggle"!==e.mode||!e.$table.is("[ "+s.attr.init+"]")||n(e.$table)})}(this,jQuery),function(t,e){var a={selectors:{init:"table[data-tablesaw-mode-switch]"},attributes:{excludeMode:"data-tablesaw-mode-exclude"},classes:{main:"tablesaw-modeswitch",toolbar:"tablesaw-toolbar"},modes:["stack","swipe","columntoggle"],init:function(t){var s=e(t),n=s.attr(a.attributes.excludeMode),i=s.prev().filter(".tablesaw-bar"),l=e("<div>").addClass(a.classes.main+" "+a.classes.toolbar).html(function(){var t,e=["<label>"+Tablesaw.i18n.columns+":"],i=s.attr("data-tablesaw-mode");e.push('<span class="btn btn-small">&#160;<select>');for(var l=0,o=a.modes.length;l<o;l++)n&&n.toLowerCase()===a.modes[l]||((t=i===a.modes[l])&&a.modes[l],e.push("<option"+(t?" selected":"")+' value="'+a.modes[l]+'">'+Tablesaw.i18n.modes[l]+"</option>"));return e.push("</select></span></label>"),e.join("")}),o=i.find(".tablesaw-advance").eq(0);o.length?l.insertBefore(o):l.appendTo(i),l.find(".btn").tablesawbtn(),l.find("select").bind("change",a.onModeChange)},onModeChange:function(){var t=e(this),s=t.closest("."+a.classes.main),n=t.closest(".tablesaw-bar").nextUntil(n).eq(0),i=t.val();s.remove(),n.data("table").destroy(),n.attr("data-tablesaw-mode",i),n.table()}};e(t.document).on("tablesawcreate",function(t,e){e.$table.is(a.selectors.init)&&a.init(e.table)})}(this,jQuery);